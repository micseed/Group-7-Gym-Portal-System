<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>
    <link rel="stylesheet" href="assets/css/client.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Client Dashboard</title>
   
    <style>
      /* =============== Globals ============== */
        * {
        font-family: "Poppins", sans-serif;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        }

        :root {
        --blue: #203A93;
        --white: #fff;
        --gray: #f5f5f5;
        --black1: #222;
        --black2: #999;
        --yellow: #F1D27C;
        --light-blue: #e8eeff;
        --red: #ff6b6b;
        --green: #4caf50;
        }

        body {
        min-height: 100vh;
        overflow-x: hidden;
        }

        .container {
        position: relative;
        width: 100%;
        }

        /* =============== Navigation ================ */
        .navigation {
        position: fixed;
        width: 300px;
        height: 100%;
        background: var(--blue);
        border-left: 10px solid var(--blue);
        transition: 0.5s;
        overflow: hidden;
        }
        .navigation.active {
        width: 80px;
        }

        .navigation ul {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        }

        .navigation ul li {
        position: relative;
        width: 100%;
        list-style: none;
        border-top-left-radius: 30px;
        border-bottom-left-radius: 30px;
        }

        .navigation ul li:hover,
        .navigation ul li.hovered {
        background-color: var(--white);
        }

        .navigation ul li:nth-child(1) {
        margin-bottom: 40px;
        pointer-events: none;
        }

        .navigation ul li a {
        position: relative;
        display: block;
        width: 100%;
        display: flex;
        text-decoration: none;
        color: var(--white);
        }
        .navigation ul li:hover a,
        .navigation ul li.hovered a {
        color: var(--blue);
        }

        .navigation ul li a .icon {
        position: relative;
        display: block;
        min-width: 60px;
        height: 60px;
        line-height: 75px;
        text-align: center;
        }
        .navigation ul li a .icon ion-icon {
        font-size: 1.75rem;
        }

        .navigation ul li a .title {
        position: relative;
        display: block;
        padding: 0 10px;
        height: 60px;
        line-height: 60px;
        text-align: start;
        white-space: nowrap;
        }

        /* --------- Curve Outside ---------- */
        .navigation ul li:hover a::before,
        .navigation ul li.hovered a::before {
        content: "";
        position: absolute;
        right: 0;
        top: -50px;
        width: 50px;
        height: 50px;
        background-color: transparent;
        border-radius: 50%;
        box-shadow: 35px 35px 0 10px var(--white);
        pointer-events: none;
        }

        .navigation ul li:hover a::after,
        .navigation ul li.hovered a::after {
        content: "";
        position: absolute;
        right: 0;
        bottom: -50px;
        width: 50px;
        height: 50px;
        background-color: transparent;
        border-radius: 50%;
        box-shadow: 35px -35px 0 10px var(--white);
        pointer-events: none;
        }

        /* ===================== Main ===================== */
        .main {
        position: absolute;
        width: calc(100% - 300px);
        left: 300px;
        min-height: 100vh;
        background: var(--white);
        transition: 0.5s;
        }
        .main.active {
        width: calc(100% - 80px);
        left: 80px;
        }

        .topbar {
        width: 100%;
        height: 60px;
        display: flex;
        align-items: center;
        padding: 0 10px;
        justify-content:space-between;
        }

        .toggle {
        position: relative;
        width: 60px;
        height: 60px;
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 2.5rem;
        cursor: pointer;
        }

        .search {
        position: relative;
        width: 800px;
        margin: 0 10px;
        }

        .search label {
        position: relative;
        width: 100%;
        }

        .search label input {
        width: 100%;
        height: 40px;
        border-radius: 40px;
        padding: 5px 20px;
        padding-left: 35px;
        font-size: 18px;
        outline: none;
        border: 1px solid var(--black2);
        }

        .search label ion-icon {
        position: absolute;
        top: 0;
        left: 10px;
        font-size: 1.2rem;
        }

        .user {
        position: relative;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        overflow: hidden;
        cursor: pointer;
        }


        .user img {
        position: absolute;
        justify-items: end;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        object-fit: cover;
        }

        /* =============== Search ============== */
        .search-container {
        position: relative;
        width: 800px;
        margin: 0 10px;
        }

        .search-container label {
        display: flex;
        align-items: center; 
        width: 100%;
        border: 1px solid #ccc;
        border-radius: 15px;
        overflow: hidden; 
        }

        #search-input {
        flex-grow: 1; 
        padding: 10px;
        border: none;
        outline: none;
        font-size: 16px;
        box-sizing: border-box; 
        margin-right: 5px; 
        }

        .search-container label ion-icon {
        padding-right: 10px;
        font-size: 20px; 
        color: #777;
        }

        #search-results {
        position: absolute;
        top: calc(100% + 2px);
        left: 0;
        right: 0;
        background-color: #fff;
        border: 1px solid #ccc;
        border-radius: 8px;
        margin-top: 2px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        z-index: 10;
        display: none;
        overflow: hidden; 
        }

        #search-results ul {
        list-style: none;
        padding: 8px 0;
        margin: 0;
        }

        #search-results li {
        padding: 12px 16px;
        cursor: pointer;
        transition: background-color 0.2s ease;
        font-size: 1.0em;
        color: #333;
        }

        #search-results li:hover {
        background-color: #f5f5f5;
        color: #222;
        }

        #search-results li:active {
        background-color: #eee;
        }


        #search-results li span.highlight {
        font-weight: bold;
        color: #007bff; 
        }

        /* =============== Mail Icon ============== */
        .mail-container {
        position: relative;
        display: inline-block;
        }

        #mail-icon-inbox {
        font-size: 25px;
        color: #203A93;
        cursor: pointer;
        }

        #mail-icon-inbox:hover {
        opacity: 0.8;
        }

        #unread-notification {
        position: absolute;
        top: -8px;
        right: -8px;
        background-color: red;
        color: white;
        font-size: 12px;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        text-align: center;
        line-height: 18px;
        display: none; 
        }

        #inbox-preview {
        position: absolute;
        top: calc(100% + 5px);
        right: -10px;
        background-color: #f9f9f9;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        width: 250px;
        padding: 15px;
        display: none;
        z-index: 10;
        text-align: left;
        }

        #inbox-preview strong {
        display: block;
        margin-bottom: 5px;
        }

        .email-item {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        padding: 3px 0; 
        }

        .email-item.sender {
        font-weight: bold;
        }

        .email-item.subject {
        color: #555;
        font-size: 0.9em; 
        }

        #inbox-preview hr {
        margin-top: 8px;
        margin-bottom: 8px;
        }

        #inbox-preview a {
        display: block;
        margin-top: 10px;
        font-size: 0.8em;
        text-align: right;
        color: #007bff;
        text-decoration: none;
        }

        /* =============== Notification Icon ============== */
        .notification-container {
        position: relative;
        display: inline-block;
        }

        #notification-icon {
        font-size: 25px;
        color: #203A93;
        cursor: pointer;
        }

        #notification-icon:hover {
        opacity: 0.8;
        }

        #notification-badge {
        position: absolute;
        top: -8px;
        right: -8px;
        background-color: orange;
        color: white;
        font-size: 12px;
        border-radius: 50%;
        width: 18px;
        height: 18px;
        text-align: center;
        line-height: 18px;
        display: block; 
        }

        #notifications-dropdown {
        position: absolute;
        top: calc(100% + 5px);
        right: -10px;
        background-color: #f9f9f9;
        border: 1px solid #ccc;
        border-radius: 5px;
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        width: 250px;
        padding: 15px;
        display: none;
        z-index: 10;
        text-align: left;
        }

        #notifications-dropdown strong {
        display: block;
        margin-bottom: 5px;
        }

        .notification-item {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        padding: 3px 0;
        }

        .notification-item.title {
        font-weight: bold;
        margin-top: 5px;
        }

        .notification-item.message {
        color: #555;
        font-size: 0.9em;
        }

        #notifications-dropdown hr {
        margin-top: 8px;
        margin-bottom: 8px;
        }

        #notifications-dropdown a {
        display: block;
        margin-top: 10px;
        font-size: 0.8em;
        text-align: right;
        color: #007bff;
        text-decoration: none;
        }

        /* Modal Styles for Sign out*/
        .modal {
        display: none; 
        position: fixed; 
        z-index: 1000; 
        left: 0;
        top: 0;
        width: 100%; 
        height: 100%; 
        overflow: auto; 
        background-color: rgba(0,0,0,0.4); 
        backdrop-filter: blur(5px);
        justify-content: center;
        align-items: center;
        }

        .modal.show {
        display: flex; 
        }

        .modal-content {
        background-color: #fefefe;
        margin: 15% auto; 
        padding: 30px;
        border: 1px solid #888;
        width: 600px; 
        max-width: 400px; 
        border-radius: 15px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        position: relative;
        }

        .modal-header {
        padding-bottom: 20px;
        border-bottom: 1px solid #eee;
        margin-bottom: 20px;
        }

        .modal-title {
        font-size: 1.5em;
        color: #333;
        font-weight: bold;
        }

        .modal-body {
        font-size: 1.1em;
        color: #555;
        margin-bottom: 20px;
        }

        .modal-footer {
        display: flex;
        justify-content: flex-end;
        gap: 15px;
        }

        .modal-button {
        background-color: #007bff; 
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 16px;
        transition: background-color 0.3s ease;
        }

        .modal-button:hover {
        background-color: #0056b3;
        }

        .modal-button.yes-button {
        background-color: #203A93;
        }

        .modal-button.yes-button:hover {
        background-color: #162b6e;
        }

        .modal-button.no-button {
        background-color: #F1D27C;
        }

        .modal-button.no-button:hover {
        background-color: #d9ba5f;
        }

        /* Chat container styles */
        .chat-container {
            width: 96%;
            justify-self: center;
            height: calc(100vh - 60px);
            margin-top: 5%;
            display: flex;
        }

        /* Contacts sidebar */
        .contacts-sidebar {
            border-radius: 20px;
            width: 300px;
            background-color: var(--white);
            border-right: 1px solid #ddd;
            overflow-y: auto;
        }

        .contacts-header {
            padding: 20px;
            background-color: var(--blue);
            color: var(--white);
            font-size: 1.2rem;
            font-weight: bold;
        }

        .search-contacts {
            padding: 10px;
            background-color: var(--white);
            border-bottom: 1px solid #ddd;
        }

        .search-contacts input {
            width: 100%;
            padding: 8px 10px;
            border: 1px solid #ddd;
            border-radius: 20px;
            outline: none;
        }

        .contact-list {
            list-style: none;
        }

        .contact-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .contact-item:hover, .contact-item.active {
            background-color: var(--light-blue);
        }

        .contact-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin-right: 15px;
            overflow: hidden;
        }

        .contact-avatar img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .contact-info {
            flex: 1;
        }

        .contact-name {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .contact-status {
            font-size: 0.85rem;
            color: var(--black2);
        }

        .contact-status.online {
            color: var(--green);
        }

        /* Chat area */
   .chat-area {
    
       flex: 1;
       display: flex;
       flex-direction: column;
       background-color: #f9f9f9;
       margin-left: 10px; /* Add a left margin */
       /* Or, if you prefer spacing on all sides: */
       /* margin: 10px; */
   }

   .chat-header {
       display: flex;
       align-items: center;
       padding: 15px 20px;
       background-color: var(--white);
       border-bottom: 1px solid #ddd;
   }

   .current-contact-avatar {
       width: 40px;
       height: 40px;
       border-radius: 50%;
       margin-right: 15px;
       overflow: hidden;
   }

   .current-contact-avatar img {
       width: 100%;
       height: 100%;
       object-fit: cover;
   }

   .current-contact-info {
       flex: 1;
   }

   .current-contact-name {
       font-weight: bold;
   }

   .current-contact-status {
       font-size: 0.85rem;
       color: var(--green);
   }

   .chat-tools {
       display: flex;
       gap: 15px;
   }

   .chat-tool {
       font-size: 1.2rem;
       color: var(--blue);
       cursor: pointer;
   }

   .messages-container {
       flex: 1;
       padding: 20px;
       overflow-y: auto;
       display: flex;
       flex-direction: column;
   }

   .message {
       max-width: 70%;
       margin-bottom: 15px;
       padding: 10px 15px;
       border-radius: 10px;
       position: relative;
   }

   .message.received {
       align-self: flex-start;
       background-color: var(--white);
       border-top-left-radius: 0;
   }

   .message.sent {
       align-self: flex-end;
       background-color: var(--blue);
       color: var(--white);
       border-top-right-radius: 0;
   }

   .message-time {
       font-size: 0.75rem;
       color: var(--black2);
       margin-top: 5px;
       text-align: right;
   }

   .message.sent .message-time {
       color: #ccc;
   }

   .message-input-container {
       display: flex;
       align-items: center;
       padding: 15px;
       background-color: var(--white);
       border-top: 1px solid #ddd;
   }

   .message-input {
       flex: 1;
       padding: 10px 15px;
       border: 1px solid #ddd;
       border-radius: 20px;
       outline: none;
       resize: none;
       max-height: 100px;
       min-height: 40px;
   }

   .message-actions {
       display: flex;
       gap: 10px;
       margin-left: 10px;
   }

   .message-action {
       width: 40px;
       height: 40px;
       border-radius: 50%;
       display: flex;
       justify-content: center;
       align-items: center;
       background-color: var(--blue);
       color: var(--white);
       cursor: pointer;
       transition: background-color 0.2s;
   }

   .message-action:hover {
       background-color: #162b6e;
   }

        /* Navigation bar */
        .navigation {
            position: fixed;
            width: 300px;
            height: 100%;
            background: var(--blue);
            border-left: 10px solid var(--blue);
            transition: 0.5s;
            overflow: hidden;
            z-index: 1000;
        }

        .navigation.active {
            width: 80px;
        }

        .navigation ul {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
        }

        .navigation ul li {
            position: relative;
            width: 100%;
            list-style: none;
            border-top-left-radius: 30px;
            border-bottom-left-radius: 30px;
        }

        .navigation ul li:hover,
        .navigation ul li.hovered {
            background-color: var(--white);
        }

        .navigation ul li:nth-child(1) {
            margin-bottom: 40px;
            pointer-events: none;
        }

        .navigation ul li a {
            position: relative;
            display: block;
            width: 100%;
            display: flex;
            text-decoration: none;
            color: var(--white);
        }

        .navigation ul li:hover a,
        .navigation ul li.hovered a {
            color: var(--blue);
        }

        .navigation ul li a .icon {
            position: relative;
            display: block;
            min-width: 60px;
            height: 60px;
            line-height: 75px;
            text-align: center;
        }

        .navigation ul li a .icon ion-icon {
            font-size: 1.75rem;
        }

        .navigation ul li a .title {
            position: relative;
            display: block;
            padding: 0 10px;
            height: 60px;
            line-height: 60px;
            text-align: start;
            white-space: nowrap;
        }

        .navigation ul li:hover a::before,
        .navigation ul li.hovered a::before {
            content: "";
            position: absolute;
            right: 0;
            top: -50px;
            width: 50px;
            height: 50px;
            background-color: transparent;
            border-radius: 50%;
            box-shadow: 35px 35px 0 10px var(--white);
            pointer-events: none;
        }

        .navigation ul li:hover a::after,
        .navigation ul li.hovered a::after {
            content: "";
            position: absolute;
            right: 0;
            bottom: -50px;
            width: 50px;
            height: 50px;
            background-color: transparent;
            border-radius: 50%;
            box-shadow: 35px -35px 0 10px var(--white);
            pointer-events: none;
        }

        /* Main content */
        .main {
            position: absolute;
            width: calc(100% - 300px);
            left: 300px;
            min-height: 100vh;
            background: var(--white);
            transition: 0.5s;
        }

        .main.active {
            width: calc(100% - 80px);
            left: 80px;
        }

        .topbar {
            width: 100%;
            height: 60px;
            display: flex;
            align-items: center;
            padding: 0 10px;
            justify-content: space-between;
            position: fixed;
            top: 0;
            left: 300px;
            width: calc(100% - 300px);
            background-color: var(--white);
            z-index: 999;
            transition: 0.5s;
        }

        .topbar.active {
            left: 80px;
            width: calc(100% - 80px);
        }

        .toggle {
            position: relative;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2.5rem;
            cursor: pointer;
        }

        .user {
            position: relative;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            overflow: hidden;
            cursor: pointer;
        }

        .user img {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .name {
            margin-right: 10px;
        }

        /* Date divider */
        .date-divider {
            display: flex;
            align-items: center;
            margin: 20px 0;
            color: var(--black2);
        }

        .date-divider::before,
        .date-divider::after {
            content: "";
            flex: 1;
            border-bottom: 1px solid #ddd;
        }

        .date-divider::before {
            margin-right: 10px;
        }

        .date-divider::after {
            margin-left: 10px;
        }

        /* Mobile responsiveness */
        @media (max-width: 991px) {
            .navigation {
                left: -300px;
            }
            .navigation.active {
                width: 300px;
                left: 0;
            }
            .main {
                width: 100%;
                left: 0;
            }
            .main.active {
                left: 300px;
            }
            .topbar {
                width: 100%;
                left: 0;
            }
            .topbar.active {
                left: 300px;
            }
            .contacts-sidebar {
                width: 250px;
            }
        }

        @media (max-width: 768px) {
            .contacts-sidebar {
                position: absolute;
                left: -250px;
                height: 100%;
                transition: 0.3s;
                z-index: 100;
            }
            .contacts-sidebar.active {
                left: 0;
            }
            .chat-container {
                margin-top: 60px;
            }
            .chat-header {
                padding: 10px;
            }
            .message {
                max-width: 85%;
            }
        }

        /* Message status indicators */
        .message-status {
            font-size: 0.7rem;
            margin-top: 2px;
            text-align: right;
            color: #ccc;
        }

        /* Typing indicator */
        .typing-indicator {
            display: flex;
            align-items: center;
            background-color: var(--white);
            border-radius: 10px;
            padding: 8px 15px;
            margin-bottom: 15px;
            align-self: flex-start;
            border-top-left-radius: 0;
        }

        .typing-indicator span {
            height: 8px;
            width: 8px;
            margin: 0 2px;
            background-color: var(--black2);
            border-radius: 50%;
            display: inline-block;
            animation: typing-bounce 1.4s infinite ease-in-out both;
        }

        .typing-indicator span:nth-child(1) {
            animation-delay: -0.32s;
        }

        .typing-indicator span:nth-child(2) {
            animation-delay: -0.16s;
        }

        @keyframes typing-bounce {
            0%, 80%, 100% { transform: scale(0); }
            40% { transform: scale(1); }
        }


        /* =============== Globals ============== */
* {
    font-family: "Poppins", sans-serif;
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --blue: #203A93;
    --white: #fff;
    --gray: #f5f5f5;
    --black1: #222;
    --black2: #999;
    --yellow: #F1D27C;
    --light-blue: #e8eeff;
    --red: #ff6b6b;
    --green: #4caf50;
}

body {
    min-height: 100vh;
    overflow-x: hidden;
}

.container {
    position: relative;
    width: 100%;
}

/* =============== Navigation ================ */
.navigation {
    position: fixed;
    width: 300px;
    height: 100%;
    background: var(--blue);
    border-left: 10px solid var(--blue);
    transition: 0.5s;
    overflow: hidden;
    z-index: 1000;
}

.navigation.active {
    width: 80px;
}

.navigation ul {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
}

.navigation ul li {
    position: relative;
    width: 100%;
    list-style: none;
    border-top-left-radius: 30px;
    border-bottom-left-radius: 30px;
}

.navigation ul li:hover,
.navigation ul li.hovered {
    background-color: var(--white);
}

.navigation ul li:nth-child(1) {
    margin-bottom: 40px;
    pointer-events: none;
}

.navigation ul li a {
    position: relative;
    display: block;
    width: 100%;
    display: flex;
    text-decoration: none;
    color: var(--white);
}

.navigation ul li:hover a,
.navigation ul li.hovered a {
    color: var(--blue);
}

.navigation ul li a .icon {
    position: relative;
    display: block;
    min-width: 60px;
    height: 60px;
    line-height: 75px;
    text-align: center;
}

.navigation ul li a .icon ion-icon {
    font-size: 1.75rem;
}

.navigation ul li a .title {
    position: relative;
    display: block;
    padding: 0 10px;
    height: 60px;
    line-height: 60px;
    text-align: start;
    white-space: nowrap;
}

/* --------- Curve Outside ---------- */
.navigation ul li:hover a::before,
.navigation ul li.hovered a::before {
    content: "";
    position: absolute;
    right: 0;
    top: -50px;
    width: 50px;
    height: 50px;
    background-color: transparent;
    border-radius: 50%;
    box-shadow: 35px 35px 0 10px var(--white);
    pointer-events: none;
}

.navigation ul li:hover a::after,
.navigation ul li.hovered a::after {
    content: "";
    position: absolute;
    right: 0;
    bottom: -50px;
    width: 50px;
    height: 50px;
    background-color: transparent;
    border-radius: 50%;
    box-shadow: 35px -35px 0 10px var(--white);
    pointer-events: none;
}

/* ===================== Main ===================== */
.main {
    position: absolute;
    width: calc(100% - 300px);
    left: 300px;
    min-height: 100vh;
    background: var(--white);
    transition: 0.5s;
}

.main.active {
    width: calc(100% - 80px);
    left: 80px;
}

.topbar {
    width: 100%;
    height: 60px;
    display: flex;
    align-items: center;
    padding: 0 10px;
    justify-content: space-between;
    position: fixed;
    top: 0;
    left: 300px;
    width: calc(100% - 300px);
    background-color: var(--white);
    z-index: 999;
    transition: 0.5s;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

.topbar.active {
    left: 80px;
    width: calc(100% - 80px);
}

.toggle {
    position: relative;
    width: 60px;
    height: 60px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 2.5rem;
    cursor: pointer;
}

.search {
    position: relative;
    width: 40%;
    max-width: 800px;
    margin: 0 10px;
}

.search label {
    position: relative;
    width: 100%;
}

.search label input {
    width: 100%;
    height: 40px;
    border-radius: 40px;
    padding: 5px 20px;
    padding-left: 35px;
    font-size: 16px;
    outline: none;
    border: 1px solid var(--black2);
}

.search label ion-icon {
    position: absolute;
    top: 0;
    left: 10px;
    font-size: 1.2rem;
}

.user {
    position: relative;
    width: 40px;
    height: 40px;
    border-radius: 50%;
    overflow: hidden;
    cursor: pointer;
}

.user img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.name {
    margin-right: 10px;
}

/* Top bar icons container */
.topbar-icons {
    display: flex;
    align-items: center;
    gap: 15px;
}

/* Chat container styles */
.chat-container {
    width: 96%;
    height: calc(100vh - 80px);
    margin: 70px auto 0;
    display: flex;
    border-radius: 10px;
    overflow: hidden;
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

/* Contacts sidebar */
.contacts-sidebar {
    width: 300px;
    background-color: var(--white);
    border-right: 1px solid #ddd;
    overflow-y: auto;
    transition: all 0.3s ease;
}

.contacts-header {
    padding: 20px;
    background-color: var(--blue);
    color: var(--white);
    font-size: 1.2rem;
    font-weight: bold;
    position: sticky;
    top: 0;
    z-index: 5;
}

.search-contacts {
    padding: 10px;
    background-color: var(--white);
    border-bottom: 1px solid #ddd;
    position: sticky;
    top: 60px;
    z-index: 5;
}

.search-contacts input {
    width: 100%;
    padding: 8px 10px;
    border: 1px solid #ddd;
    border-radius: 20px;
    outline: none;
}

.contact-list {
    list-style: none;
    overflow-y: auto;
    height: calc(100% - 120px);
}

.contact-item {
    display: flex;
    align-items: center;
    padding: 15px;
    border-bottom: 1px solid #eee;
    cursor: pointer;
    transition: background-color 0.2s;
}

.contact-item:hover, .contact-item.active {
    background-color: var(--light-blue);
}

.contact-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    margin-right: 15px;
    overflow: hidden;
    flex-shrink: 0;
}

.contact-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.contact-info {
    flex: 1;
    min-width: 0; /* Prevents content from expanding beyond container */
}

.contact-name {
    font-weight: bold;
    margin-bottom: 5px;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.contact-status {
    font-size: 0.85rem;
    color: var(--black2);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.contact-status.online {
    color: var(--green);
}

/* Mobile contacts toggle */
.mobile-contacts-toggle {
    display: none;
    position: absolute;
    top: 70px;
    left: 10px;
    z-index: 100;
    background-color: var(--blue);
    color: white;
    border: none;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    justify-content: center;
    align-items: center;
    cursor: pointer;
    box-shadow: 0 2px 5px rgba(0,0,0,0.2);
}

/* Chat area */
.chat-area {
    flex: 1;
    display: flex;
    flex-direction: column;
    background-color: #f9f9f9;
    position: relative;
}

.chat-header {
    display: flex;
    align-items: center;
    padding: 15px 20px;
    background-color: var(--white);
    border-bottom: 1px solid #ddd;
    position: sticky;
    top: 0;
    z-index: 5;
}

.current-contact-avatar {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 15px;
    overflow: hidden;
    flex-shrink: 0;
}

.current-contact-avatar img {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

.current-contact-info {
    flex: 1;
    min-width: 0;
}

.current-contact-name {
    font-weight: bold;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.current-contact-status {
    font-size: 0.85rem;
    color: var(--green);
}

.chat-tools {
    display: flex;
    gap: 15px;
}

.chat-tool {
    font-size: 1.2rem;
    color: var(--blue);
    cursor: pointer;
}

.messages-container {
    flex: 1;
    padding: 20px;
    overflow-y: auto;
    display: flex;
    flex-direction: column;
}

.message {
    max-width: 70%;
    margin-bottom: 15px;
    padding: 10px 15px;
    border-radius: 10px;
    position: relative;
    word-wrap: break-word;
}

.message.received {
    align-self: flex-start;
    background-color: var(--white);
    border-top-left-radius: 0;
}

.message.sent {
    align-self: flex-end;
    background-color: var(--blue);
    color: var(--white);
    border-top-right-radius: 0;
}

.message-time {
    font-size: 0.75rem;
    color: var(--black2);
    margin-top: 5px;
    text-align: right;
}

.message.sent .message-time {
    color: #ccc;
}

.message-input-container {
    display: flex;
    align-items: center;
    padding: 15px;
    background-color: var(--white);
    border-top: 1px solid #ddd;
}

.message-input {
    flex: 1;
    padding: 10px 15px;
    border: 1px solid #ddd;
    border-radius: 20px;
    outline: none;
    resize: none;
    max-height: 100px;
    min-height: 40px;
}

.message-actions {
    display: flex;
    gap: 10px;
    margin-left: 10px;
}

.message-action {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    justify-content: center;
    align-items: center;
    background-color: var(--blue);
    color: var(--white);
    cursor: pointer;
    transition: background-color 0.2s;
}

.message-action:hover {
    background-color: #162b6e;
}

/* Date divider */
.date-divider {
    display: flex;
    align-items: center;
    margin: 20px 0;
    color: var(--black2);
}

.date-divider::before,
.date-divider::after {
    content: "";
    flex: 1;
    border-bottom: 1px solid #ddd;
}

.date-divider::before {
    margin-right: 10px;
}

.date-divider::after {
    margin-left: 10px;
}

/* Message status indicators */
.message-status {
    font-size: 0.7rem;
    margin-top: 2px;
    text-align: right;
    color: #ccc;
}

/* Typing indicator */
.typing-indicator {
    display: flex;
    align-items: center;
    background-color: var(--white);
    border-radius: 10px;
    padding: 8px 15px;
    margin-bottom: 15px;
    align-self: flex-start;
    border-top-left-radius: 0;
}

.typing-indicator span {
    height: 8px;
    width: 8px;
    margin: 0 2px;
    background-color: var(--black2);
    border-radius: 50%;
    display: inline-block;
    animation: typing-bounce 1.4s infinite ease-in-out both;
}

.typing-indicator span:nth-child(1) {
    animation-delay: -0.32s;
}

.typing-indicator span:nth-child(2) {
    animation-delay: -0.16s;
}

@keyframes typing-bounce {
    0%, 80%, 100% { transform: scale(0); }
    40% { transform: scale(1); }
}

/* Responsive media queries */
@media (max-width: 1200px) {
    .search {
        width: 30%;
    }
}

@media (max-width: 991px) {
    .navigation {
        left: -300px;
        z-index: 1001;
    }
    
    .navigation.active {
        width: 300px;
        left: 0;
    }
    
    .main {
        width: 100%;
        left: 0;
    }
    
    .main.active {
        left: 300px;
        width: calc(100% - 300px);
    }
    
    .topbar {
        width: 100%;
        left: 0;
    }
    
    .topbar.active {
        left: 300px;
        width: calc(100% - 300px);
    }
    
    .contacts-sidebar {
        width: 250px;
    }
    
    .search {
        width: 50%;
    }
    
    /* Add a backdrop when navigation is open */
    .navigation-backdrop {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 1000;
    }
    
    .navigation-backdrop.active {
        display: block;
    }
}

@media (max-width: 768px) {
    .chat-container {
        flex-direction: column;
        width: 100%;
        margin: 70px 0 0 0;
        border-radius: 0;
    }
    
    .contacts-sidebar {
        position: fixed;
        left: -250px;
        top: 60px;
        bottom: 0;
        width: 250px;
        z-index: 100;
        transition: 0.3s;
        box-shadow: 2px 0 5px rgba(0,0,0,0.1);
    }
    
    .contacts-sidebar.active {
        left: 0;
    }
    
    .mobile-contacts-toggle {
        display: flex;
    }
    
    .chat-area {
        margin-left: 0;
        height: calc(100vh - 70px);
    }
    
    .chat-header {
        padding: 10px;
    }
    
    .message {
        max-width: 85%;
    }
    
    .search {
        display: none;
    }
    
    /* Add a backdrop when contacts sidebar is open */
    .contacts-backdrop {
        display: none;
        position: fixed;
        top: 60px;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0,0,0,0.5);
        z-index: 99;
    }
    
    .contacts-backdrop.active {
        display: block;
    }
    
    .chat-tools {
        gap: 10px;
    }
    
    .message-input-container {
        padding: 10px;
    }
    
    .message-actions {
        gap: 5px;
    }
    
    .message-action {
        width: 35px;
        height: 35px;
    }
}

@media (max-width: 480px) {
    .topbar {
        padding: 0 5px;
    }
    
    .toggle {
        width: 50px;
    }
    
    .name {
        display: none;
    }
    
    .chat-header {
        padding: 8px;
    }
    
    .current-contact-avatar {
        width: 35px;
        height: 35px;
        margin-right: 10px;
    }
    
    .messages-container {
        padding: 10px;
    }
    
    .message {
        max-width: 90%;
        padding: 8px 12px;
    }
    
    .message-input-container {
        padding: 8px;
    }
    
    .message-input {
        padding: 8px 12px;
    }
    
    .message-action {
        width: 32px;
        height: 32px;
    }
}

/* Tablet-specific adjustments */
@media (min-width: 601px) and (max-width: 991px) {
    .chat-container {
        height: calc(100vh - 70px);
    }
    
    .contacts-sidebar {
        width: 280px;
    }
}

/* Landscape mode for mobile */
@media (max-height: 500px) and (orientation: landscape) {
    .chat-container {
        height: calc(100vh - 50px);
        margin-top: 50px;
    }
    
    .topbar {
        height: 50px;
    }
    
    .contacts-sidebar {
        top: 50px;
    }
    
    .message-input-container {
        padding: 5px 10px;
    }
    
    .message-input {
        min-height: 35px;
    }
    
    .message-action {
        width: 30px;
        height: 30px;
    }
}

/* Modal Styles for Sign out */
.modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
    backdrop-filter: blur(5px);
    justify-content: center;
    align-items: center;
}

.modal.show {
    display: flex;
}

.modal-content {
    background-color: #fefefe;
    margin: auto;
    padding: 30px;
    border: 1px solid #888;
    width: 90%;
    max-width: 400px;
    border-radius: 15px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    position: relative;
}

.modal-header {
    padding-bottom: 20px;
    border-bottom: 1px solid #eee;
    margin-bottom: 20px;
}

.modal-title {
    font-size: 1.5em;
    color: #333;
    font-weight: bold;
}

.modal-body {
    font-size: 1.1em;
    color: #555;
    margin-bottom: 20px;
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 15px;
}

.modal-button {
    background-color: #007bff;
    color: white;
    border: none;
    padding: 10px 20px;
    border-radius: 4px;
    cursor: pointer;
    font-size: 16px;
    transition: background-color 0.3s ease;
}

.modal-button:hover {
    background-color: #0056b3;
}

.modal-button.yes-button {
    background-color: #203A93;
}

.modal-button.yes-button:hover {
    background-color: #162b6e;
}

.modal-button.no-button {
    background-color: #F1D27C;
}

.modal-button.no-button:hover {
    background-color: #d9ba5f;
}

@media (max-width: 480px) {
    .modal-content {
        padding: 20px;
    }
    
    .modal-footer {
        flex-direction: column;
        gap: 10px;
    }
    
    .modal-button {
        width: 100%;
    }
}
        

    </style>
    
</head>

<body>
    <!-- =============== Navigation ================ -->
    <div class="container">
        <div class="navigation">
            <ul>
                <li>
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="barbell"></ion-icon>
                        </span>
                        <span class="title">ENERGIZE</span>
                    </a>
                </li>

                <li>
                    <a href="testclient.html">
                        <span class="icon">
                            <ion-icon name="home-outline"></ion-icon>
                        </span>
                        <span class="title">Dashboard</span>
                    </a>
                </li>

                <li>
                    <a href="clientmessage.html">
                        <span class="icon">
                            <ion-icon name="chatbubble-outline"></ion-icon>
                        </span>
                        <span class="title">Message</span>
                    </a>
                </li>


                <li>
                    <a href="profile.html">
                        <span class="icon">
                            <ion-icon name="person-circle-outline"></ion-icon>
                        </span>
                        <span class="title">Profile</span>
                    </a>
                </li>

                <li>
                    <a href="schedule.html">
                        <span class="icon">
                            <ion-icon name="calendar-outline"></ion-icon>
                        </span>
                        <span class="title">Workout Plan</span>
                    </a>
                </li>

                <li>
                    <a href="payment.html">
                        <span class="icon">
                            <ion-icon name="card-outline"></ion-icon>
                        </span>
                        <span class="title">Membership Plan</span>
                    </a>
                </li>

                <li>
                    <a href="settings.html">
                        <span class="icon">
                            <ion-icon name="settings-outline"></ion-icon>
                        </span>
                        <span class="title">Settings</span>
                    </a>
                </li>

                <li>
                    <a href="#">
                        <span class="icon">
                            <ion-icon name="log-out-outline"></ion-icon>
                        </span>
                        <span class="title">Sign Out</span>
                    </a>
                </li>
            </ul>
        </div>

        <!-- ========================= Main ==================== -->
        <div class="main">
            <div class="topbar">
                <div class="toggle">
                    <ion-icon name="menu-outline"></ion-icon>
                </div>

                <div class="search-container">
                    <label>
                      <input type="text" id="search-input" placeholder="Search what you're looking for">
                      <ion-icon name="search-outline"></ion-icon>
                    </label>
                    <div id="search-results">
                    </div>
                </div>

                <div class="mail-container">
                    <ion-icon name="mail" id="mail-icon-inbox"></ion-icon>
                    <div id="unread-notification">1</div>
                    <div id="inbox-preview">
                    <strong>Inbox</strong>
                    <hr>
                    <div id="unread-messages">
                        <div class="email-item sender">Coaches</div>
                        <div class="email-item subject">Session today!</div>
                        <hr>
                    </div>
                    <div id="read-messages">
                        <div class="email-item sender">Coach</div>
                        <div class="email-item subject">Can I ask?</div>
                    </div>
                    <a href="#">See All</a>
                    </div>
                </div>

                <div class="notification-container">
                    <ion-icon name="notifications" id="notification-icon"></ion-icon>
                    <div id="notification-badge">1</div>
                    <div id="notifications-dropdown">
                      <strong>Notifications</strong>
                      <hr>
                      <div id="notification-list">
                        <div class="notification-item title">Today, 1:00 PM</div>
                        <div class="notification-item message">Your schedule is today.</div>
                        <hr>
                        <div class="notification-item title">Coach John Cena</div>
                        <div class="notification-item message">Cancelled the session</div>
                      </div>
                      <a href="#">See All</a>
                    </div>
                </div>
            
                <div class="name">
                    <p>Esnyr Slayalili</p>
                </div>
    
                <div class="user">
                    <img src="assets/img/esnyr.jpg" alt="User profile">
                </div>                
            </div>

            <!-- Chat Container -->
            <div class="chat-container">
                <!-- Contacts Sidebar -->
                <div class="contacts-sidebar">
                    <div class="contacts-header">Messages</div>
                    <div class="search-contacts">
                        <input type="text" placeholder="Search coaches...">
                    </div>
                    <ul class="contact-list">
                        <li class="contact-item active">
                            <div class="contact-avatar">
                                <img src="assets/img/customer01.jpg" alt="Michael Rodriguez">
                            </div>
                            <div class="contact-info">
                                <div class="contact-name">Michael Rodriguez</div>
                                <div class="contact-status online">Online</div>
                            </div>
                        </li>
                        <li class="contact-item">
                            <div class="contact-avatar">
                                <img src="assets/img/coach3.jpg" alt="Sarah Johnson">
                            </div>
                            <div class="contact-info">
                                <div class="contact-name">Sarah Johnson</div>
                                <div class="contact-status">Last seen 2h ago</div>
                            </div>
                        </li>
                        <li class="contact-item">
                            <div class="contact-avatar">
                                <img src="assets/img/coach4.jpg" alt="David Thompson">
                            </div>
                            <div class="contact-info">
                                <div class="contact-name">David Thompson</div>
                                <div class="contact-status">Last seen yesterday</div>
                            </div>
                        </li>
                        <li class="contact-item">
                            <div class="contact-avatar">
                                <img src="assets/img/coach6.jpg" alt="Emma Wilson">
                            </div>
                            <div class="contact-info">
                                <div class="contact-name">Emma Wilson</div>
                                <div class="contact-status">Last seen 3d ago</div>
                            </div>
                        </li>
                    </ul>
                </div>

                <!-- Chat Area -->
                <div class="chat-area">
                    <div class="chat-header">
                        <div class="current-contact-avatar">
                            <img src="assets/img/customer01.jpg" alt="Michael Rodriguez">
                        </div>
                        <div class="current-contact-info">
                            <div class="current-contact-name">Michael Rodriguez</div>
                            <div class="current-contact-status">Online</div>
                        </div>
                        <div class="chat-tools">
                            <div class="chat-tool">
                                <ion-icon name="call-outline"></ion-icon>
                            </div>
                            <div class="chat-tool">
                                <ion-icon name="videocam-outline"></ion-icon>
                            </div>
                            <div class="chat-tool">
                                <ion-icon name="ellipsis-vertical-outline"></ion-icon>
                            </div>
                        </div>
                    </div>

                    <div class="messages-container">
                        <div class="date-divider">April 27, 2025</div>
                        
                        <div class="message received">
                            <div class="message-content">
                                Good morning! How are you feeling today? Ready for your workout session?
                            </div>
                            <div class="message-time">9:30 AM</div>
                        </div>

                        <div class="message sent">
                            <div class="message-content">
                                Morning Coach! I'm feeling pretty good, but a bit sore from yesterday's leg day.
                            </div>
                            <div class="message-time">9:32 AM</div>
                            <div class="message-status">Read</div>
                        </div>

                        <div class="message received">
                            <div class="message-content">
                                That's normal after a good leg workout! Make sure you're stretching and staying hydrated. Would you like to modify today's workout to focus more on recovery?
                            </div>
                            <div class="message-time">9:35 AM</div>
                        </div>

                        <div class="message sent">
                            <div class="message-content">
                                That sounds great. What kind of recovery exercises do you recommend?
                            </div>
                            <div class="message-time">9:38 AM</div>
                            <div class="message-status">Read</div>
                        </div>

                        <div class="message received">
                            <div class="message-content">
                                I'd recommend some light cardio to increase blood flow to the muscles, followed by dynamic stretching and foam rolling. How about we start with a 10-minute walk, then go through a series of stretches targeting your quads, hamstrings, and calves?
                            </div>
                            <div class="message-time">9:40 AM</div>
                        </div>

                        <div class="message sent">
                            <div class="message-content">
                                Perfect! I have a foam roller at home too. What time should we meet today?
                            </div>
                            <div class="message-time">9:42 AM</div>
                            <div class="message-status">Read</div>
                        </div>

                        <div class="date-divider">Today</div>

                        <div class="message received">
                            <div class="message-content">
                                Hey there! Just checking in on how you're feeling today after our recovery session yesterday. Any improvement in the soreness?
                            </div>
                            <div class="message-time">8:15 AM</div>
                        </div>

                        <div class="message sent">
                            <div class="message-content">
                                Hi Coach! Yes, I'm feeling much better today. The foam rolling really helped!
                            </div>
                            <div class="message-time">8:20 AM</div>
                            <div class="message-status">Read</div>
                        </div>

                        <div class="message received">
                            <div class="message-content">
                                Great to hear! Ready for our upper body session at 4 PM today? I've prepared a challenging but balanced routine focusing on your shoulders and back.
                            </div>
                            <div class="message-time">8:22 AM</div>
                        </div>

                        <div class="message sent">
                            <div class="message-content">
                                Definitely! I've been looking forward to working on my upper body strength. Should I bring anything special?
                            </div>
                            <div class="message-time">8:25 AM</div>
                            <div class="message-status">Read</div>
                        </div>

                        <div class="message received">
                            <div class="message-content">
                                Just your regular gym gear and water bottle. And don't forget to have a light meal about 1-2 hours before our session. We'll be focusing on compound movements so you'll need that energy!
                            </div>
                            <div class="message-time">8:30 AM</div>
                        </div>

                        <div class="message sent">
                            <div class="message-content">
                                Got it! By the way, I wanted to ask about my nutrition plan. I've been following it for two weeks now, but I'm still feeling hungry after dinner. Any tips?
                            </div>
                            <div class="message-time">8:35 AM</div>
                            <div class="message-status">Read</div>
                        </div>

                        <div class="typing-indicator">
                            <span></span>
                            <span></span>
                            <span></span>
                        </div>
                    </div>

                    <div class="message-input-container">
                        <textarea class="message-input" placeholder="Type a message..."></textarea>
                        <div class="message-actions">
                            <div class="message-action">
                                <ion-icon name="send"></ion-icon>
                            </div>
            
           
    
    <!-- Sign Out Modal -->
    <div id="signOutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Sign Out</h3>
            </div>
            <div class="modal-body">
                Are you sure you want to sign out?
            </div>
            <div class="modal-footer">
                <button id="signOutNo" class="modal-button no-button">No</button>
                <button id="signOutYes" class="modal-button yes-button">Yes</button>
            </div>
        </div>
    </div>
    
   

    <script>
       document.addEventListener('DOMContentLoaded', function() {

// ===== Navigation Link Activation =====
let list = document.querySelectorAll(".navigation li");

function activeLink() {
    list.forEach((item) => {
        item.classList.remove("hovered");
    });
    this.classList.add("hovered");
}

list.forEach((item) => item.addEventListener("click", activeLink));

// ===== Menu Toggle (Navigation Sidebar) =====
let toggle = document.querySelector(".toggle");
let navigation = document.querySelector(".navigation");
let main = document.querySelector(".main");
let topbar = document.querySelector('.topbar'); // Assuming topbar needs adjustment

if (toggle && navigation && main && topbar) {
    toggle.onclick = function () {
        navigation.classList.toggle("active");
        main.classList.toggle("active");
        topbar.classList.toggle('active'); // Toggle active class on topbar too

        // Create or remove backdrop for navigation
        if (navigation.classList.contains('active') && window.innerWidth <= 991) {
            createBackdrop('navigation-backdrop', () => {
                navigation.classList.remove('active');
                main.classList.remove('active');
                topbar.classList.remove('active');
            });
        } else {
            removeBackdrop('navigation-backdrop');
        }
    };
} else {
    console.error("Navigation toggle elements not found.");
}

// ===== Search Function =====
const searchInput = document.getElementById('search-input');
const searchResultsDiv = document.getElementById('search-results');
const searchContainer = document.querySelector('.search-container'); // Need container for click outside

const searchData = [
    "How to diet",
    "Paano makapasa sa webdev",
    "Effective workout plan",
    "Effective sleep",
    "Gulay effective diet",
    "Recent Sessions",
    "Overall well being",
    "Updates",
    "Coaches",
    "Plans"
];

if (searchInput && searchResultsDiv && searchContainer) {
    searchInput.addEventListener('input', function() {
        const searchTerm = this.value.toLowerCase().trim();
        if (searchTerm === '') {
            searchResultsDiv.style.display = 'none';
            searchResultsDiv.innerHTML = '';
            return;
        }

        const filteredResults = searchData.filter(item =>
            item.toLowerCase().includes(searchTerm)
        );
        displayResults(filteredResults);
    });

    function displayResults(results) {
        searchResultsDiv.innerHTML = '';

        if (results.length > 0) {
            const ul = document.createElement('ul');
            results.forEach(result => {
                const li = document.createElement('li');
                li.textContent = result;
                li.addEventListener('click', function() {
                    searchInput.value = this.textContent;
                    searchResultsDiv.style.display = 'none';
                    searchResultsDiv.innerHTML = ''; // Clear results after selection
                });
                ul.appendChild(li);
            });
            searchResultsDiv.appendChild(ul);
            searchResultsDiv.style.display = 'block';
        } else {
            searchResultsDiv.style.display = 'none';
        }
    }

    // Close search results when clicking outside
    document.addEventListener('click', function(event) {
        if (!searchContainer.contains(event.target)) {
            searchResultsDiv.style.display = 'none';
        }
    });
} else {
     console.error("Search elements not found.");
}

// ===== Mail Function =====
const mailIconInbox = document.getElementById('mail-icon-inbox');
const unreadNotification = document.getElementById('unread-notification');
const inboxPreview = document.getElementById('inbox-preview');
const mailContainer = document.querySelector('.mail-container'); // Need container for click outside
let hasUnread = true; // Example state

if (mailIconInbox && unreadNotification && inboxPreview && mailContainer) {
    function updateUnreadIndicator() {
        unreadNotification.style.display = hasUnread ? 'block' : 'none';
    }

    updateUnreadIndicator(); // Initial check

    mailIconInbox.addEventListener('click', function(event) {
        event.stopPropagation(); // Prevent click from immediately closing via document listener
        const isVisible = inboxPreview.style.display === 'block';
        inboxPreview.style.display = isVisible ? 'none' : 'block';

        if (hasUnread && !isVisible) { // Only mark as read when opening
            hasUnread = false;
            updateUnreadIndicator();
            console.log('Mail icon clicked - marking as read');
        }
    });

    // Close inbox preview when clicking outside
    document.addEventListener('click', function(event) {
        if (!mailContainer.contains(event.target) && inboxPreview.style.display === 'block') {
             inboxPreview.style.display = 'none';
        }
    });
} else {
    console.error("Mail elements not found.");
}

// ===== Notification Function =====
const notificationIcon = document.getElementById('notification-icon');
const notificationBadge = document.getElementById('notification-badge');
const notificationsDropdown = document.getElementById('notifications-dropdown');
const notificationContainer = document.querySelector('.notification-container'); // Need container for click outside

if (notificationIcon && notificationBadge && notificationsDropdown && notificationContainer) {
    notificationIcon.addEventListener('click', function(event) {
        event.stopPropagation(); // Prevent click from immediately closing via document listener
        const isVisible = notificationsDropdown.style.display === 'block';
        notificationsDropdown.style.display = isVisible ? 'none' : 'block';

        if (!isVisible) { // Only hide badge when opening
             notificationBadge.style.display = 'none';
        }
    });

    // Close notifications dropdown when clicking outside
    document.addEventListener('click', function(event) {
        if (!notificationContainer.contains(event.target) && notificationsDropdown.style.display === 'block') {
            notificationsDropdown.style.display = 'none';
        }
    });
} else {
    console.error("Notification elements not found.");
}

// ===== Message Functionality =====
const messageInput = document.querySelector('.message-input');
const sendButton = document.querySelector('.message-action');
const messagesContainer = document.querySelector('.messages-container');
const typingIndicator = document.querySelector('.typing-indicator');
const contactItems = document.querySelectorAll('.contact-item');
const chatArea = document.querySelector('.chat-area'); // Parent for mobile toggle
const contactsSidebar = document.querySelector('.contacts-sidebar');

if (messageInput && sendButton && messagesContainer && typingIndicator && chatArea && contactsSidebar) {
    // Function to add a new message
    function addMessage(content, isSent = true) {
        if (typingIndicator) typingIndicator.style.display = 'none'; // Hide typing indicator

        const messageDiv = document.createElement('div');
        messageDiv.className = `message ${isSent ? 'sent' : 'received'}`;

        const contentDiv = document.createElement('div');
        contentDiv.className = 'message-content';
        contentDiv.textContent = content;

        const timeDiv = document.createElement('div');
        timeDiv.className = 'message-time';

        const now = new Date();
        const hours = now.getHours();
        const minutes = now.getMinutes();
        const ampm = hours >= 12 ? 'PM' : 'AM';
        const formattedHours = hours % 12 || 12;
        const formattedMinutes = minutes < 10 ? '0' + minutes : minutes;

        timeDiv.textContent = `${formattedHours}:${formattedMinutes} ${ampm}`;

        messageDiv.appendChild(contentDiv);
        messageDiv.appendChild(timeDiv);

        if (isSent) {
            const statusDiv = document.createElement('div');
            statusDiv.className = 'message-status';
            statusDiv.textContent = 'Sent'; // Initial status
            messageDiv.appendChild(statusDiv);
        }

        messagesContainer.appendChild(messageDiv);

        // Scroll to bottom smoothly
        messagesContainer.scrollTo({
            top: messagesContainer.scrollHeight,
            behavior: 'smooth'
         });


        return messageDiv;
    }

    // Function to simulate coach response
    function simulateCoachResponse(sentMessageElement) {
        if (typingIndicator) {
             typingIndicator.style.display = 'flex';
             messagesContainer.scrollTop = messagesContainer.scrollHeight; // Scroll to show typing
        }

        const responses = [
            "That's a great question about your nutrition plan. If you're feeling hungry after dinner, try adding more protein and fiber to your meals. Also, you could include a small healthy snack before bed like Greek yogurt or a protein shake.",
            "Let's adjust your meal plan. Try increasing your portion sizes slightly for your protein and vegetables. Also, make sure you're drinking enough water throughout the day.",
            "I understand the hunger issue. Let's add a light evening snack to your plan - perhaps some cottage cheese with berries or a small handful of nuts. How does that sound?",
            "Looking forward to our session today! About your nutrition plan, I've noticed you might be missing some healthy fats which help with satiety. Try adding some avocado or nuts to your dinner."
        ];

        const randomResponse = responses[Math.floor(Math.random() * responses.length)];

        // Simulate typing delay
        setTimeout(() => {
            addMessage(randomResponse, false); // Add received message

            // Change status of the *specific* sent message to 'Read'
            if (sentMessageElement) {
                const statusDiv = sentMessageElement.querySelector('.message-status');
                if (statusDiv) {
                    statusDiv.textContent = 'Read';
                }
            }
             // Hide typing indicator after response
             if (typingIndicator) typingIndicator.style.display = 'none';

        }, 2000 + Math.random() * 2000); // Random delay between 2-4 seconds
    }

    // Send message on button click
    sendButton.addEventListener('click', () => {
        const message = messageInput.value.trim();
        if (message) {
            const sentMessageElement = addMessage(message, true); // Get the element
            messageInput.value = '';

            // Auto-resize textarea back to default
            messageInput.style.height = 'auto';
            messageInput.dispatchEvent(new Event('input')); // Trigger resize calculation

            // Simulate coach response after a short delay
            setTimeout(() => simulateCoachResponse(sentMessageElement), 500);
        }
    });

    // Send message on Enter key (without Shift)
    messageInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault(); // Prevent newline
            sendButton.click();
        }
    });

    // Auto-resize textarea
    messageInput.addEventListener('input', function() {
        this.style.height = 'auto'; // Reset height
        // Set height capped at 100px (or adjust as needed)
        this.style.height = Math.min(this.scrollHeight, 100) + 'px';
    });

    // Contact item click handling
    contactItems.forEach(item => {
        item.addEventListener('click', function() {
            contactItems.forEach(i => i.classList.remove('active'));
            this.classList.add('active');

            // Close contacts sidebar on mobile after selection
            if (window.innerWidth <= 768 && contactsSidebar.classList.contains('active')) {
                contactsSidebar.classList.remove('active');
                removeBackdrop('contacts-backdrop');
            }

            // **Placeholder:** Here you would load the actual conversation
            // for the selected contact. For demo, clear existing messages
            // and maybe add a placeholder message.
            messagesContainer.innerHTML = '<div style="text-align: center; padding: 20px; color: #888;">Conversation history would load here.</div>';
             if (typingIndicator) typingIndicator.style.display = 'none'; // Hide typing indicator
            console.log(`Selected contact: ${this.querySelector('.contact-name').textContent}`);
        });
    });

    // --- Mobile Contacts Toggle ---
    const mobileToggle = document.createElement('button');
    mobileToggle.className = 'mobile-contacts-toggle';
    // Use an appropriate icon library or text
    mobileToggle.innerHTML = '<ion-icon name="people-outline" aria-label="Toggle Contacts"></ion-icon>'; // Example using Ionicons
    // Or: mobileToggle.textContent = 'Contacts';
    chatArea.appendChild(mobileToggle); // Add button to the chat area

    mobileToggle.addEventListener('click', function() {
        contactsSidebar.classList.toggle('active');

        // Create or remove backdrop for contacts sidebar
        if (contactsSidebar.classList.contains('active')) {
            createBackdrop('contacts-backdrop', () => {
                 contactsSidebar.classList.remove('active');
            });
        } else {
            removeBackdrop('contacts-backdrop');
        }
    });

} else {
    console.error("Chat or contacts elements not found.");
}


// ===== Sign Out Modal =====
const signOutLink = document.getElementById('signOutLink');
const signOutModal = document.getElementById('signOutModal');
const signOutYesButton = document.getElementById('signOutYes');
const signOutNoButton = document.getElementById('signOutNo');
const modalOverlay = document.getElementById('modalOverlay'); // Assuming an overlay div exists

function showModal(modalElement) {
    if (modalOverlay) modalOverlay.style.display = 'block';
    modalElement.style.display = 'block';
     // Add class for animation/transition if desired
    requestAnimationFrame(() => {
         if (modalOverlay) modalOverlay.classList.add('active');
         modalElement.classList.add('active');
    });
}

function hideModal(modalElement) {
     if (modalOverlay) modalOverlay.classList.remove('active');
     modalElement.classList.remove('active');
     // Wait for transition before hiding
     modalElement.addEventListener('transitionend', () => {
        if (modalOverlay) modalOverlay.style.display = 'none';
        modalElement.style.display = 'none';
     }, { once: true }); // Remove listener after it runs once

     // Fallback if no transition
     setTimeout(() => {
         if (!modalElement.classList.contains('active')) { // Check if still meant to be hidden
             if (modalOverlay) modalOverlay.style.display = 'none';
             modalElement.style.display = 'none';
         }
     }, 300); // Match transition duration
}


if (signOutLink && signOutModal && signOutYesButton && signOutNoButton && modalOverlay) {
    signOutLink.addEventListener('click', function(event) {
        event.preventDefault();
        showModal(signOutModal);
    });

    signOutYesButton.addEventListener('click', function() {
        // Add sign-out logic here if needed (e.g., clearing tokens)
        window.location.href = 'index.html'; // Redirect
    });

    signOutNoButton.addEventListener('click', function() {
        hideModal(signOutModal);
    });

     // Optional: Close modal if overlay is clicked
     modalOverlay.addEventListener('click', function() {
         hideModal(signOutModal);
     });

} else {
    console.error("Sign out modal elements not found.");
}


// ===== General Helper Functions =====

// Function to create a backdrop
function createBackdrop(id, onClickCallback) {
    let backdrop = document.getElementById(id);
    if (!backdrop) {
        backdrop = document.createElement('div');
        backdrop.id = id;
        backdrop.className = 'sidebar-backdrop'; // Use a general class for styling
        document.body.appendChild(backdrop);

        // Add transition class slightly after adding to DOM
         requestAnimationFrame(() => {
              requestAnimationFrame(() => { // Double requestAnimationFrame ensures it applies after display: block
                  backdrop.classList.add('active');
              });
         });


        backdrop.onclick = function() {
            onClickCallback(); // Execute the specific close action
            removeBackdrop(id); // Remove this backdrop
        };
    }
    return backdrop;
}

// Function to remove a backdrop
function removeBackdrop(id) {
    let backdrop = document.getElementById(id);
    if (backdrop) {
        backdrop.classList.remove('active');
         // Wait for transition before removing
         backdrop.addEventListener('transitionend', () => {
             if (backdrop) backdrop.remove();
         }, { once: true });
         // Fallback removal
         setTimeout(() => { if (backdrop) backdrop.remove(); }, 300); // Match CSS transition duration
    }
}


// ===== Window Resize Listener =====
window.addEventListener('resize', function() {
    // If window is wider than mobile breakpoint for contacts, ensure sidebar is not forced active and remove backdrop
    if (window.innerWidth > 768) { // Adjust breakpoint as needed (matches mobile contacts CSS)
        if (contactsSidebar && contactsSidebar.classList.contains('active')) {
             // Optionally decide if it should close or stay open based on desktop design
             // contactsSidebar.classList.remove('active'); // Example: close it
        }
        removeBackdrop('contacts-backdrop');
    }

    // If window is wider than mobile breakpoint for navigation, remove nav backdrop
    if (window.innerWidth > 991) { // Adjust breakpoint as needed (matches navigation CSS)
        // Navigation state (.active) is usually handled by CSS media queries on desktop
        removeBackdrop('navigation-backdrop');
    }
});

}); // End DOMContentLoaded

        
    </script>

    <!-- ====== ionicons ======= -->
    <script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
</body>

</html>